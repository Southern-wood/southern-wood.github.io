<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Tiny Survey: Agent Safety :: Wood&#39;s Blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Agent Safety 包括哪些内容？ 工程视角 CSIRO&rsquo;s data61 27 Jan 2025 Swiss Cheese Model for AI Safety: A Taxonomy and Reference Architecture for Multi-Layered Guardrails of Foundation Model Based Agents
Summary:
本文提出 Agent 防护的 “多层奶酪模型”，核心主张：
没有单一的防护措施能够确保 Agent 的绝对安全，每一层防护（即每一片“奶酪”）都可能有其自身的弱点或漏洞（即“孔洞”） 通过将多个不同的防护层（例如，提示词审查、计划验证、工具使用监控、最终结果审查）叠在一起，各层之间的“孔洞”不会对齐；在某个层面（如提示词层）未能被捕获的风险，很可能会在另一个层面（如计划层或结果层）被拦截，从而创建出一个整体上鲁棒的纵深防御体系 论文划分的防护层：
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://Southern-wood.github.io/handouts/2025-11-13_agent_safety/" />


<script defer src="https://umami-blog-ruddy.vercel.app/hugo-ladder"
  data-website-id="7203903e-dd2f-4d78-9e04-e09e9a0fa0e5"
  data-domains="southern-wood.github.io">
</script>





  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/dark.min.b38cb27d4bd6b8dbdbba0e1c2306105e4555cd2bb5b9f8d53daf8ea4a14942ea.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/light.min.5377cedef12ed001ed6df527ad1b2b2f2afc2a3c032e19165fb9f9375a6ef866.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="https://Southern-wood.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">








  


  

<script>window.THEME_CSS = "{\"dark\":\"https://Southern-wood.github.io/css/dark.min.b38cb27d4bd6b8dbdbba0e1c2306105e4555cd2bb5b9f8d53daf8ea4a14942ea.css\",\"light\":\"https://Southern-wood.github.io/css/light.min.5377cedef12ed001ed6df527ad1b2b2f2afc2a3c032e19165fb9f9375a6ef866.css\"}";</script>



  
  <script src="https://Southern-wood.github.io/js/head.min.c5c6e014b2e6e864a6a83f0f472a4b87ffc714a99a170fb8752072daaf7603c3.js"></script>








<link rel="shortcut icon" href="https://Southern-wood.github.io/favicon.png">
<link rel="apple-touch-icon" href="https://Southern-wood.github.io/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Tiny Survey: Agent Safety">
<meta property="og:description" content="Agent Safety 包括哪些内容？ 工程视角 CSIRO&rsquo;s data61 27 Jan 2025 Swiss Cheese Model for AI Safety: A Taxonomy and Reference Architecture for Multi-Layered Guardrails of Foundation Model Based Agents
Summary:
本文提出 Agent 防护的 “多层奶酪模型”，核心主张：
没有单一的防护措施能够确保 Agent 的绝对安全，每一层防护（即每一片“奶酪”）都可能有其自身的弱点或漏洞（即“孔洞”） 通过将多个不同的防护层（例如，提示词审查、计划验证、工具使用监控、最终结果审查）叠在一起，各层之间的“孔洞”不会对齐；在某个层面（如提示词层）未能被捕获的风险，很可能会在另一个层面（如计划层或结果层）被拦截，从而创建出一个整体上鲁棒的纵深防御体系 论文划分的防护层：
" />
<meta property="og:url" content="https://Southern-wood.github.io/handouts/2025-11-13_agent_safety/" />
<meta property="og:site_name" content="Wood&#39;s Blog" />

  <meta property="og:image" content="https://Southern-wood.github.io/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="Tiny Survey" />

  <meta property="article:section" content="academic" />

  <meta property="article:section" content="handout" />


  <meta property="article:published_time" content="2025-11-13 20:42:54 &#43;0800 &#43;0800" />










<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" crossorigin="anonymous">

<style>
 
.katex-display { margin: 1rem 0; }
.katex { font-size: 0.95em; }
</style>


</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/posts">
  <div class="logo">
    Wood&#39;s Blog
  </div>
</a>

    </div>
    
    <div class="header__theme">
      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme"></button>
    </div>
    
    <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/">Biography</a></li>
        
      
        
          <li><a href="/posts">Blog</a></li>
        
      
        
          <li><a href="/handouts">Handouts</a></li>
        
      
        
          <li><a href="/tags">Tags</a></li>
        
      
        
          <li><a href="https://umami-blog-ruddy.vercel.app/share/3oFhrRZrn0ZykJpZ">Visitors</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
  <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/" >Biography</a></li>
        
      
        
          <li><a href="/posts" >Blog</a></li>
        
      
        
          <li><a href="/handouts" >Handouts</a></li>
        
      
        
          <li><a href="/tags" >Tags</a></li>
        
      
        
          <li><a href="https://umami-blog-ruddy.vercel.app/share/3oFhrRZrn0ZykJpZ" target="_blank">Visitors</a></li>
        
      
      
    
  </ul>
</nav>

  




<script src="https://Southern-wood.github.io/js/header.min.7ff7a2b9c0b78f90c1e544e95c9970508ed2c376e518daf3c9e0064860d5b447.js"></script>

</header>

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://Southern-wood.github.io/handouts/2025-11-13_agent_safety/">Tiny Survey: Agent Safety</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-11-13&nbsp;[Updated 2025-11-13]</time><span class="post-reading-time">6 min read (2913 words)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://Southern-wood.github.io/tags/agent/">Agent</a>&nbsp;
      
      #<a href="https://Southern-wood.github.io/tags/agent-safety/">Agent Safety</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h2 id="agent-safety-包括哪些内容">Agent Safety 包括哪些内容？<a href="#agent-safety-包括哪些内容" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="工程视角">工程视角<a href="#工程视角" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>CSIRO&rsquo;s data61 27 Jan 2025</strong> <a href="https://arxiv.org/html/2408.02205v4">Swiss Cheese Model for AI Safety: A Taxonomy and Reference Architecture for Multi-Layered Guardrails of Foundation Model Based Agents</a></p>
<p>Summary:</p>
<p>本文提出 Agent 防护的 “多层奶酪模型”，核心主张：</p>
<ol>
<li>没有单一的防护措施能够确保 Agent 的绝对安全，每一层防护（即每一片“奶酪”）都可能有其自身的弱点或漏洞（即“孔洞”）</li>
<li>通过将多个不同的防护层（例如，提示词审查、计划验证、工具使用监控、最终结果审查）叠在一起，各层之间的“孔洞”不会对齐；在某个层面（如提示词层）未能被捕获的风险，很可能会在另一个层面（如计划层或结果层）被拦截，从而创建出一个整体上鲁棒的纵深防御体系</li>
</ol>
<p>论文划分的防护层：</p>
<p><img src="/handouts/2025-11-13_agent_safety/pic/Swiss_Cheese_Model_Layers.png" alt="Layer"></p>
<p>一些基本的防护策略类型：</p>
<ul>
<li>Block：阻止包含有害内容的输入</li>
<li>Filter：过滤输入 或者 输出 中的有害内容或不合规内容</li>
<li>Flag：标记潜在有害内容以供人工审查</li>
<li>Modify：修改模型的输入 或者 输出 以消除有害内容</li>
<li>Validate：验证模型的输入、输出 或者 内部状态 以确保其符合安全标准</li>
<li>……</li>
</ul>
<h3 id="规划安全">规划安全<a href="#规划安全" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>EMNLP 2024 Findings</strong> <a href="https://arxiv.org/html/2402.01586v3">TrustAgent: Towards Safe and Trustworthy LLM-based Agents through Agent Constitution</a></p>
<p>提出了一种基于“Agent Constitution”（智能体宪法）的安全框架 TrustAgent</p>
<p>Summary:</p>
<p>本文认为，LLM Agent 安全的关键挑战是如何制定 Agent 可理解的安全规则，并引导其在运行时遵守。</p>
<p><img src="/handouts/2025-11-13_agent_safety/pic/Agent_Constitution_Framework.png" alt="Agent Constitution Framework"></p>
<ol start="0">
<li><strong>Constitutional Principles</strong>: 定义一组类似于宪法的原则，作为 Agent 行为的指导方针。</li>
<li><strong>Pre-Planning</strong>: 在 Agent 执行任务前，a. 通过将宪法规则转化为以不同形式转述的 QA 对，并对 LLM 进行微调/强化学习； b. 在 Agent 执行一段时间，积累数据后，将 1) 用户指令；2) 当前已生成的动作轨迹；3) 规划代理生成的下一步动作；4) 相关的安全法规；5) 检查员对该步骤的反馈 作为训练数据，进一步微调模型。</li>
<li><strong>In-Planning</strong>: 在生成任务规划时候，通过<strong>动态检索</strong>相关的宪法规则，并将其作为上下文输入，指导规划生成。</li>
<li><strong>Post-Planning</strong>: 在 Agent 生成完整的任务规划后，使用**检察官（Inspector）**模块对规划进行审查，确保其符合宪法原则。若发现不符合的部分，则反馈给规划模块进行修正。（Pre-Planning 的数据来源）</li>
</ol>
<h3 id="运行时安全">运行时安全<a href="#运行时安全" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>ICSE 2026</strong> <a href="https://arxiv.org/abs/2503.18666">AgentSpec: Customizable Runtime Enforcement for Safe and Reliable LLM Agents</a></p>
<p>Summary:</p>
<p>[软工顶会 Paper，比较注重实现] 提出一种运行时强制执行框架 AgentSpec，可以以编程形式定义安全规则，并在 Agent 执行任务时动态监控和强制执行这些规则。</p>
<p>一条规则包括：</p>
<ul>
<li><strong>Trigger</strong>：定义何时触发该规则，例如在每次 Agent 生成新动作前，或者在 Agent 完成整个任务后。</li>
<li><strong>Check</strong>：定义必须满足的条件，例如检查 Agent 的动作是否符合安全标准，或者检查某个参数是否在允许范围内。</li>
<li><strong>Enforce</strong>：定义如果检查失败时应采取的措施，例如阻止 Agent 执行该动作。</li>
</ul>
<p>该框架已集成到 LangChain 中，支持多种类型的规则定义和执行。</p>
<hr>
<h2 id="如何让-agent-的安全和智能水平协同提升">如何让 Agent 的安全和智能水平协同提升？<a href="#如何让-agent-的安全和智能水平协同提升" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="架构搜索视角">架构搜索视角<a href="#架构搜索视角" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>NeurIPS 2025 Spotlight</strong> <a href="https://arxiv.org/abs/2502.00757">AgentBreeder: Mitigating the AI Safety Risks of Multi-Agent Scaffolds via Self-Improvement</a></p>
<p>Summary:</p>
<p>通过进化算法搜索最优的多智能体架构，以提升整体系统的智能水平和安全性；通过在每个进化周期中评估智能体的 1.性能 2.安全性 两个维度，并通过聚类分析找到具有代表性的架构，在此基础上进行变异和交叉，生成新的架构。</p>
<p>Results:</p>
<p>在所有三次实验中，新发现架构的安全评分平均提升了 79.4%，最高提升达 110.7%，同时 Agent 本身的能力也有所提升。</p>
<h3 id="对抗强化学习视角">对抗强化学习视角<a href="#对抗强化学习视角" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>Google DeepMind 6 Oct 2025</strong> <a href="https://arxiv.org/pdf/2510.05442">Adversarial Reinforcement Learning for Large Language Model Agent Safety</a></p>
<p>Summary:</p>
<p>Agent 执行任务的时候，难以抵抗**间接提示注入（indirect prompt injection）**攻击，导致执行有害行为。</p>
<p>本文提出一种对抗强化学习思路，训练一个对抗 LLM 和一个 LLM Agent；将整个强化学习过程视为一个双人零和博弈的过程。对抗 LLM 的目标是生成能够诱导 Agent 泄漏个人隐私的多样的间接注入提示；LLM Agent 的目标是在对抗这些注入提示的同时，完成原始给定的任务。</p>
<p>关键的难点在于，如果使用传统的强化学习范式，LLM Agent 会陷入循环遗忘，因为随着对抗 LLM 的注入进化，LLM Agent 会忘记之前的防御策略，并且这种遗忘并不会影响模型获得奖励信号。因此，本文提出，LLM Agent 在训练的时候，对抗的是一个从所有历史版本的对抗 LLM 中随机抽取得到的对手，对抗 LLM 不受影响；这样 LLM Agent 为了稳健地获得奖励信号，必须学会记住并综合所有历史对抗 LLM 的攻击策略，从而提升其防御能力。</p>
<p>步骤：</p>
<ol>
<li>模仿学习：通过高级模型演示来生成防御成功和失败的示例，训练初始的 LLM Agent 和对抗 LLM。</li>
<li>对抗强化学习：奖励函数为稀疏信号，防御成功则奖励 LLM Agent +1 分，对抗成功则奖励对抗 LLM +1 分。使用 GRPO 算法进行训练。</li>
</ol>
<p><strong>Key Findings: 这种方法旨在提升 LLM Agent 抵抗间接提示注入攻击的能力；并且它实际上还提升了 LLM Agent 完成原始任务的能力。</strong></p>
<hr>
<h2 id="动态调整和学习的安全防护">动态调整和学习的安全防护<a href="#动态调整和学习的安全防护" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="个性化用户建模">个性化用户建模<a href="#个性化用户建模" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>ICLR 2025 Under Review，6642</strong> <a href="https://arxiv.org/abs/2509.23614">PSG-Agent: Personality-Aware Safety Guardrail for LLM-based Agents</a></p>
<p>Summary:</p>
<p>当前的 LLM Agent 防护策略通常对所有的用户采用统一规则，忽视了个体之间的差异，可能导致过度限制或不足保护；并且当前的防护策略通常是静态的、孤立，无法适应用户行为和偏好的变化，也无法检测多轮交互中整个行为链条上的风险。</p>
<p>本文主要提出采用两个 Agent 来协作实现个性化的安全防护：</p>
<ol>
<li>Profile Miner Agent：通过分析用户的历史交互数据，挖掘用户的个性特征和行为模式，生成用户画像；其中包含稳定特征（如个性特征、价值观、职业等）和动态特征（如近期兴趣、情绪状态等）。</li>
<li>Input Guard Agent：在每次用户交互时，结合用户画像和当前输入，动态调整安全防护策略；通过评估输入的潜在风险，并根据用户的个性化需求，给出一个综合判断（允许、拒绝、在监控下允许等）。</li>
</ol>
<p>在后续的 Agent 交互各个节点中，都引入用户画像信息，例如在规划阶段，结合用户的个性特征和价值观，生成符合用户需求的规划方案；在工具使用阶段，考虑用户的职业背景和兴趣，选择合适的工具和资源；在结果生成阶段，结合用户的情绪状态和近期兴趣，生成个性化的输出内容。</p>
<h3 id="动态学习和调整">动态学习和调整<a href="#动态学习和调整" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>ACL 2025</strong> <a href="https://arxiv.org/abs/2502.11448">AGrail: A Lifelong Agent Guardrail with Effective and Adaptive Safety Detection</a></p>
<p>Summary:</p>
<p>目前的 Agent 防护高度依赖手动指定上下文中的安全规则，这些规则都是预定义的；Agent 被部署到新的环境，或者执行其他下游任务时不能成功泛化。有一些方法尝试利用大模型来根据场景动态生成规则，但效果不佳，不是过分严苛使得 Agent 无法正常工作，就是过于宽松无法有效防护。</p>
<p>本文提出 AGrail 框架，通过持续学习和适应，提升 Agent 在不同环境下的安全防护能力。框架由三个主要模块组成：</p>
<ol>
<li>Analyzer：在 Agent 执行任务前，通过在内存中检索相似的历史交互，获得当时的安全检查清单（Safety Checklist），并结合当前 a.安全策略 b.防护请求（由用户或系统提供）对清单进行“添加”、“修正”或者“合并”，生成当前任务的初始安全规则。</li>
<li>Executor：接受 Analyzer 生成的安全规则，并逐条检查。对每条规则，a.如果规则不合理，删除该规则；b.合理，需要外部工具验证的，通过 ToolCaller 调用外部工具进行验证；c.合理，且不需要外部工具验证的，直接推理验证。如果发现不符合的规则，则阻止 Agent 执行。</li>
<li>Memory Updater：在 Executor 检查结束后，记录最终使用的安全检查清单，并将其重新存入内存中（覆盖之前的版本），以便在未来的任务中使用。</li>
</ol>
<p>理想情况下，Analyzer 新增规则来适应新环境、任务或者防护请求，Executor 删除不适用的规则，两者通过 Memory Updater 进行闭环反馈，从而实现动态调整和持续学习。</p>
<p>Also See: <strong>ZJU 6 Aug 2025</strong> <a href="https://arxiv.org/abs/2508.04010">HarmonyGuard: Toward Safety and Utility in Web Agents via Adaptive Policy Enhancement and Dual-Objective Optimization</a></p>
<p>采用两个智能体协作：</p>
<ol>
<li>Policy Agent 通过检索外部非结构化文档来生成安全策略，并根据后续的反馈进行调整；</li>
<li>Utility Agent 通过在 Agent 执行过程中监控其行为，评估其<strong>效用</strong>和<strong>安全性</strong>，并提供反馈给 Policy Agent 以优化其策略。</li>
</ol>

      </div></div>

  

  
    <div style="margin-top: 50px;">
  <script src="https://giscus.app/client.js" data-repo="Southern-wood/Giscus-blog" data-repo-id="R_kgDOQ4Ixeg"
    data-category="Announcements" data-category-id="DIC_kwDOQ4Ixes4C02l1" data-mapping="pathname" data-strict="0"
    data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="noborder_dark"
    data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async>
    </script>
</div>
  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2026 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>



<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

<script>

(function(){
  function init(){
    if(typeof renderMathInElement !== 'function') return;
    try{
      renderMathInElement(document.body, {
        
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ],
        
        ignoredTags: ['script','noscript','style','textarea','pre','code']
      });
    }catch(e){
      console && console.error && console.error('KaTeX render error', e);
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>



  
</div>

</body>
</html>
